#!/usr/bin/env sh
level=$1
home_dir=`dirname $0`/..

set -xe

if [ -z "${level}" ]; then
  level=patch
fi

# -------------------
#  Compile
# -------------------

npm run -s clean

npm run -s compile

# -------------------
#  Release
# -------------------

git add -f lib

npx release-it -n -p -m 'v%s' -i $level

# -------------------
#  Release Docs
# -------------------

$home_dir/bin/release-docs
